events { 
    worker_connections 1024;
}

http { 
    upstream users_web_service {
        server users_web_service:3000;
    }

    upstream tweets_web_service {
        server tweets_web_service:3000;
    }

    upstream frontend_web_service {
        server frontend_web_service:3000;
    }

    upstream likes_web_service {
        server likes_web_service:3000;
    }

    server {
        listen 80;

        location /tweets {
            proxy_pass http://tweets_web_service;
        }

        location /users {
            proxy_pass http://users_web_service;
        }

        location /likes {
            proxy_pass http://likes_web_service;
        }

        location / {
            proxy_pass http://frontend_web_service;
        }

        location /robots.txt {
            return 200 'User-agent: *\nDisallow: /';
        }
    }
}
